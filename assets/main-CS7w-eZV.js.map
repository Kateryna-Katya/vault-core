{"version":3,"file":"main-CS7w-eZV.js","sources":["../../src/main.js"],"sourcesContent":["/**\n * VAULT-CORE.BLOG - CORE ENGINE 2026\n */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    \n    // --- 1. ГЛОБАЛЬНЫЕ ПЕРЕМЕННЫЕ ---\n    let correctCaptchaAnswer = 0;\n    const header = document.querySelector('.header');\n    const burger = document.getElementById('burgerBtn');\n    const mobileMenu = document.getElementById('mobileMenu');\n    const closeMenu = document.querySelector('.close-menu');\n    const mobileLinks = document.querySelectorAll('.mobile-nav a');\n    const mainForm = document.getElementById('mainForm');\n    const phoneInput = document.getElementById('phoneInput');\n    const cookiePopup = document.getElementById('cookiePopup');\n    const acceptCookies = document.getElementById('acceptCookies');\n\n    // --- 2. ИНИЦИАЛИЗАЦИЯ ВНЕШНИХ БИБЛИОТЕК ---\n    const initLibraries = () => {\n        if (window.lucide) lucide.createIcons();\n        if (window.AOS) {\n            AOS.init({\n                duration: 1000,\n                once: true,\n                offset: 100\n            });\n        }\n    };\n\n    // --- 3. ЛОГИКА КАПЧИ ---\n    const generateCaptcha = () => {\n        const captchaQuestion = document.getElementById('captchaQuestion');\n        if (!captchaQuestion) return;\n\n        const num1 = Math.floor(Math.random() * 10) + 2;\n        const num2 = Math.floor(Math.random() * 8) + 1;\n        correctCaptchaAnswer = num1 + num2;\n\n        captchaQuestion.innerText = `Подтвердите: ${num1} + ${num2} = ?`;\n        \n        const captchaInput = document.getElementById('captchaAnswer');\n        if (captchaInput) captchaInput.value = ''; // Очистка при обновлении\n    };\n\n    // --- 4. МОБИЛЬНОЕ МЕНЮ (БУРГЕР) ---\n    const toggleMobileMenu = () => {\n        if (mobileMenu && burger) {\n            mobileMenu.classList.toggle('active');\n            burger.classList.toggle('open');\n            // Блокировка скролла при открытом меню\n            document.body.style.overflow = mobileMenu.classList.contains('active') ? 'hidden' : '';\n        }\n    };\n\n    if (burger) burger.addEventListener('click', toggleMobileMenu);\n    if (closeMenu) closeMenu.addEventListener('click', toggleMobileMenu);\n    \n    mobileLinks.forEach(link => {\n        link.addEventListener('click', () => {\n            mobileMenu.classList.remove('active');\n            burger.classList.remove('open');\n            document.body.style.overflow = '';\n        });\n    });\n\n    // --- 5. ВАЛИДАЦИЯ ТЕЛЕФОНА (ТОЛЬКО ЦИФРЫ) ---\n    if (phoneInput) {\n        phoneInput.addEventListener('input', (e) => {\n            e.target.value = e.target.value.replace(/\\D/g, '');\n        });\n    }\n\n    // --- 6. ОБРАБОТКА ФОРМЫ (AJAX IMITATION) ---\n    if (mainForm) {\n        mainForm.addEventListener('submit', (e) => {\n            e.preventDefault();\n            \n            const captchaInput = document.getElementById('captchaAnswer');\n            const statusBox = document.getElementById('formStatus');\n            const userValue = captchaInput ? parseInt(captchaInput.value) : null;\n\n            if (userValue !== correctCaptchaAnswer) {\n                alert('Неверный результат капчи. Попробуйте еще раз.');\n                generateCaptcha();\n                return;\n            }\n\n            // Имитация отправки\n            const submitBtn = mainForm.querySelector('button[type=\"submit\"]');\n            const originalBtnText = submitBtn.innerText;\n            \n            submitBtn.disabled = true;\n            submitBtn.innerText = 'Отправка...';\n\n            setTimeout(() => {\n                if (statusBox) {\n                    statusBox.style.display = 'block';\n                    statusBox.className = 'form-status success';\n                    statusBox.innerHTML = '<strong>Готово!</strong> Мы получили ваш запрос и свяжемся с вами в течение 15 минут.';\n                }\n                \n                mainForm.reset();\n                submitBtn.disabled = false;\n                submitBtn.innerText = originalBtnText;\n                generateCaptcha(); // Обновляем для безопасности\n            }, 1800);\n        });\n    }\n\n    // --- 7. КОНТРОЛЬ СКРОЛЛА (HEADER) ---\n    const handleScroll = () => {\n        if (!header) return;\n        if (window.scrollY > 60) {\n            header.classList.add('scrolled');\n        } else {\n            header.classList.remove('scrolled');\n        }\n    };\n\n    // --- 8. COOKIE POPUP ---\n    const checkCookies = () => {\n        if (!cookiePopup) return;\n        const isAccepted = localStorage.getItem('vault_cookies_accepted');\n        \n        if (!isAccepted) {\n            setTimeout(() => {\n                cookiePopup.classList.add('active');\n            }, 3000);\n        }\n    };\n\n    if (acceptCookies) {\n        acceptCookies.addEventListener('click', () => {\n            localStorage.setItem('vault_cookies_accepted', 'true');\n            cookiePopup.classList.remove('active');\n        });\n    }\n\n    // --- 9. ЗАПУСК ВСЕХ ФУНКЦИЙ ---\n    initLibraries();\n    generateCaptcha();\n    checkCookies();\n    window.addEventListener('scroll', handleScroll);\n    handleScroll(); // Проверка при загрузке\n});\n\n/**\n * Исправление для Spline-viewer (Howler Error)\n * Предотвращает падение скрипта, если Spline ищет HowlerGlobal\n */\nwindow.HowlerGlobal = window.HowlerGlobal || {};"],"names":["correctCaptchaAnswer","header","burger","mobileMenu","closeMenu","mobileLinks","mainForm","phoneInput","cookiePopup","acceptCookies","initLibraries","generateCaptcha","captchaQuestion","num1","num2","captchaInput","toggleMobileMenu","link","e","statusBox","submitBtn","originalBtnText","handleScroll","checkCookies"],"mappings":"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"}